CREATE TABLE FORUM(
	ARTICLE_ID NUMBER PRIMARY KEY,
	MEMBER_ID NUMBER NOT NULL,
	TITLE VARCHAR2(30) NOT NULL,
	ARTICLE_CONT VARCHAR2(350),
	VIEW_NUM NUMBER default 0,
	CREATED_DATE DATE NOT NULL,
	
	CONSTRAINT MEMBER_ID_FK FOREIGN KEY (MEMBER_ID) REFERENCES MEMBER (ID)
);

CREATE SEQUENCE FORUM_ID_SEQ
INCREMENT BY 1
START WITH 1;

CREATE OR REPLACE TRIGGER FORUM_ID_SEQ_TRIGGER
	BEFORE INSERT ON FORUM
	FOR EACH ROW
BEGIN
	IF :NEW.ARTICLE_ID IS NULL THEN
		SELECT FORUM_ID_SEQ.NEXTVAL
		INTO :NEW.ARTICLE_ID
		FROM DUAL;
	END IF;
END;

SELECT ARTICLE_ID, TITLE, NAME, VIEW_NUM, CREATED_DATE 
FROM MEMBER, FORUM 
WHERE MEMBER.ID = FORUM.MEMBER_ID;

-----------------------------Forum Table Dummy Data-------------------------------------
INSERT INTO FORUM
(ARTICLE_ID, MEMBER_ID, TITLE, ARTICLE_CONT, CREATED_DATE)
VALUES
(NULL, 2, 'Hello I am Sam', 'Nice to meet you', sysdate);

INSERT INTO FORUM
(ARTICLE_ID, MEMBER_ID, TITLE, ARTICLE_CONT, CREATED_DATE)
VALUES
(NULL, 21, 'Hello I am Jess', 'Nice to meet you. It is Jess.', sysdate);

INSERT INTO FORUM
(ARTICLE_ID, MEMBER_ID, TITLE, ARTICLE_CONT, CREATED_DATE)
VALUES
(NULL, 1, 'Hello I am Han', 'Nice to meet you. It is Han.', sysdate);

INSERT INTO FORUM
(ARTICLE_ID, MEMBER_ID, TITLE, ARTICLE_CONT, CREATED_DATE)
VALUES
(NULL, 61, 'Hello I am Hank', 'Nice to meet you. It is Hank.', sysdate);
---------------------------------------------------------------------------------------

SELECT * FROM(
	SELECT FORUM.ARTICLE_ID, FORUM.TITLE, FORUM.ARTICLE_CONT, MEMBER.NAME, FORUM.VIEW_NUM,
	FORUM.CREATED_DATE, ROW_NUMBER() OVER (ORDER BY FORUM.ARTICLE_ID ASC) LINE_NUMBER FROM FORUM, MEMBER WHERE MEMBER.ID = FORUM.MEMBER_ID)
	WHERE LINE_NUMBER BETWEEN 0 AND 30 ORDER BY LINE_NUMBER;
	
SELECT count(*) AS COUNT FROM FORUM;